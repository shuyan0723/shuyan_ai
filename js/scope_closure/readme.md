# JS 执行机制
- 调用栈
   记录函数的执行顺序，管理执行上下文和变量环境
   - 作用域
   变量查找规则
     当前作用域 ->冒泡到上级作用域 -> 全局
   - 作用域链
        变量查找的路径
   - 执行上下文
         函数调用是创建的上下文（代码执行）对象
   -变量环境
        变量提升
   - 词法环境
   TDZ
   - 词法作用域

   在每个执行上下文的变量环境中，都包含一个外部引用outer,用来指向外部的执行上下文。
   ## 作用域链
   - 一段代码使用一个变量时，JS 引擎首先会在当前的执行上下文中查找该变量。
   - 沿着outer 指向的外部作用域去查找
   - 到全局 
   查找的路径就叫作用域链。


   ## 词法作用域
   作用域由代码中函数声明的位置来决定，静态的
   预测代码在执行过程中如何查找变量

   词法作用域是代码编译阶段就决定好了的，和函数怎么调用没有关系。

   ## 闭包
   基础是理解词法作用域等
   根据词法作用域的规则，内部函数getName和setName总是可以访问其外部函数foo中的变量。

   根据词法作用域的规则，内部函数总是可以访问其外部函数中的申明的变量。（自由变量）
   当通过调用一个外部函数返回一个内部函数后，即使该外部函数已经执行完了，但是内部函数引用外部函数的变量依然保存在内存中，我们就把这些变量的集合称为闭包。 
   foo 外部函数，这些变量的集合称为foo函数的闭包。
   这些变量的集合也是内部函数运行的专属背包。